   1                             		.file	"rx210.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.global	_compteur
   5                             		.section B,"w",@nobits
   6                             		.p2align 2
   7                             		.balign 4
  10                             	_compteur:
  11 0000 00 00 00 00             		.zero	4
  12                             		.section P,"ax"
  13                             		.global	_main
  15                             	_main:
  16                             	.LFB0:
  17                             		.file 1 "../src/rx210.c"
   1:../src/rx210.c **** /***************************************************************/
   2:../src/rx210.c **** /*                                                             */
   3:../src/rx210.c **** /*      PROJECT NAME :  rx210                                  */
   4:../src/rx210.c **** /*      FILE         :  rx210.c                                */
   5:../src/rx210.c **** /*      DESCRIPTION  :  Main Program                           */
   6:../src/rx210.c **** /*      CPU SERIES   :  RX200                                  */
   7:../src/rx210.c **** /*      CPU TYPE     :  RX210                                  */
   8:../src/rx210.c **** /*                                                             */
   9:../src/rx210.c **** /*      This file is generated by e2 studio.                   */
  10:../src/rx210.c **** /*                                                             */
  11:../src/rx210.c **** /***************************************************************/                                
  12:../src/rx210.c ****                                                                            
  13:../src/rx210.c ****                                                                            
  14:../src/rx210.c **** /************************************************************************/
  15:../src/rx210.c **** /*    File Version: V1.00                                               */
  16:../src/rx210.c **** /*    Date Generated: 08/07/2013                                        */
  17:../src/rx210.c **** /************************************************************************/
  18:../src/rx210.c **** 
  19:../src/rx210.c **** #include "iodefine.h"
  20:../src/rx210.c **** #include "RPBRX210.h"
  21:../src/rx210.c **** #include "decoder_quadra.h"
  22:../src/rx210.c **** #include "pwm_asser_RX210.h"
  23:../src/rx210.c **** #include "asservissement.h"
  24:../src/rx210.c **** 
  25:../src/rx210.c **** 
  26:../src/rx210.c **** #ifdef CPPAPP
  27:../src/rx210.c **** //Initialize global constructors
  28:../src/rx210.c **** extern "C" void __main()
  29:../src/rx210.c **** {
  30:../src/rx210.c ****   static int initialized;
  31:../src/rx210.c ****   if (! initialized)
  32:../src/rx210.c ****     {
  33:../src/rx210.c ****       typedef void (*pfunc) ();
  34:../src/rx210.c ****       extern pfunc __ctors[];
  35:../src/rx210.c ****       extern pfunc __ctors_end[];
  36:../src/rx210.c ****       pfunc *p;
  37:../src/rx210.c **** 
  38:../src/rx210.c ****       initialized = 1;
  39:../src/rx210.c ****       for (p = __ctors_end; p > __ctors; )
  40:../src/rx210.c ****     (*--p) ();
  41:../src/rx210.c **** 
  42:../src/rx210.c ****     }
  43:../src/rx210.c **** }
  44:../src/rx210.c **** #endif 
  45:../src/rx210.c **** int compteur=0;
  46:../src/rx210.c **** 
  47:../src/rx210.c **** int main(void)
  48:../src/rx210.c **** {
  18                             		.loc 1 48 0
  19 0000 6E 6C                   		pushm	r6-r12
  20                             	.LCFI0:
  21 0002 EF 06                   		mov.L	r0, r6
  22                             	.LCFI1:
  49:../src/rx210.c **** 	LED1_OFF;
  23                             		.loc 1 49 0
  24 0004 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  25 0009 CD AB 20                		mov.B	32[r10], r11
  26 000c 75 3B 40                		or	#64, r11
  27 000f C7 AB 20                		mov.B	r11, 32[r10]
  50:../src/rx210.c **** 	LED0_OFF;
  28                             		.loc 1 50 0
  29 0012 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  30 0017 CD AB 20                		mov.B	32[r10], r11
  31 001a 75 3B 80                		or	#0xffffff80, r11
  32 001d C7 AB 20                		mov.B	r11, 32[r10]
  51:../src/rx210.c **** 	LED2_OFF;
  33                             		.loc 1 51 0
  34 0020 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  35 0025 CD AB 20                		mov.B	32[r10], r11
  36 0028 75 3B 20                		or	#32, r11
  37 002b C7 AB 20                		mov.B	r11, 32[r10]
  52:../src/rx210.c **** 	mtclk_init();		// fonction d'initialisation du module de comptage
  38                             		.loc 1 52 0
  39 002e 05 00 00 00             		bsr	_mtclk_init
  53:../src/rx210.c **** 	mtclk_start();		// démarre le décodage en quadrature
  40                             		.loc 1 53 0
  41 0032 05 00 00 00             		bsr	_mtclk_start
  54:../src/rx210.c **** 	PWM_asser_init(0x03E8);
  42                             		.loc 1 54 0
  43 0036 FB 1A E8 03             		mov.L	#0x3e8, r1
  44 003a 05 00 00 00             		bsr	_PWM_asser_init
  55:../src/rx210.c **** 	INA_D=1;INB_D=~INA_D;
  45                             		.loc 1 55 0
  46 003e FB AE 0B C0 08          		mov.L	#0x8c00b, r10
  47 0043 CD AB 20                		mov.B	32[r10], r11
  48 0046 65 1B                   		or	#1, r11
  49 0048 C7 AB 20                		mov.B	r11, 32[r10]
  50 004b FB AE 0B C0 08          		mov.L	#0x8c00b, r10
  51 0050 FB BE 0B C0 08          		mov.L	#0x8c00b, r11
  52 0055 CD BB 20                		mov.B	32[r11], r11
  53 0058 64 1B                   		and	#1, r11
  54 005a 7E 0B                   		not	r11
  55 005c 64 1B                   		and	#1, r11
  56 005e 64 1B                   		and	#1, r11
  57 0060 4B BB                   		add	r11, r11
  58 0062 CD AC 20                		mov.B	32[r10], r12
  59 0065 75 2C FD                		and	#-3, r12
  60 0068 57 CB                   		or	r12, r11
  61 006a C7 AB 20                		mov.B	r11, 32[r10]
  56:../src/rx210.c **** 	INA_G=1;INB_G=~INA_G;
  62                             		.loc 1 56 0
  63 006d FB AE 0B C0 08          		mov.L	#0x8c00b, r10
  64 0072 CD AB 20                		mov.B	32[r10], r11
  65 0075 65 4B                   		or	#4, r11
  66 0077 C7 AB 20                		mov.B	r11, 32[r10]
  67 007a FB AE 0B C0 08          		mov.L	#0x8c00b, r10
  68 007f FB BE 0B C0 08          		mov.L	#0x8c00b, r11
  69 0084 CD BB 20                		mov.B	32[r11], r11
  70 0087 5B BB                   		movu.B	r11, r11
  71 0089 68 2B                   		shlr	#2, r11
  72 008b 64 1B                   		and	#1, r11
  73 008d 7E 0B                   		not	r11
  74 008f 64 1B                   		and	#1, r11
  75 0091 64 1B                   		and	#1, r11
  76 0093 6C 3B                   		shll	#3, r11
  77 0095 CD AC 20                		mov.B	32[r10], r12
  78 0098 75 2C F7                		and	#-9, r12
  79 009b 57 CB                   		or	r12, r11
  80 009d C7 AB 20                		mov.B	r11, 32[r10]
  57:../src/rx210.c **** 	init_echant(1);
  81                             		.loc 1 57 0
  82 00a0 FB 12 00 00 80 3F       		mov.L	#0x3f800000, r1
  83 00a6 05 00 00 00             		bsr	_init_echant
  58:../src/rx210.c **** 	start_echant();
  84                             		.loc 1 58 0
  85 00aa 05 00 00 00             		bsr	_start_echant
  86                             	.L2:
  59:../src/rx210.c **** 	while(1){
  60:../src/rx210.c **** /*
  61:../src/rx210.c **** 		if(compteur_g>compteur+4096||compteur_g<compteur-4096)
  62:../src/rx210.c **** 		{
  63:../src/rx210.c **** 			LED1=~LED1;
  64:../src/rx210.c **** 			compteur = compteur_g;
  65:../src/rx210.c **** 			if(sens_rot_g==1){LED0_ON;}
  66:../src/rx210.c **** 			else if (sens_rot_g==0){LED0_OFF;}
  67:../src/rx210.c **** 			}
  68:../src/rx210.c **** 		pwm_g=0x01F4;
  69:../src/rx210.c **** 		pwm_d=0x01F4;
  70:../src/rx210.c **** 
  71:../src/rx210.c **** 		if (flag_over_MTU2==1){
  72:../src/rx210.c **** 			flag_over_MTU2=0;
  73:../src/rx210.c **** 			INA_D=~INA_D;
  74:../src/rx210.c **** 			INB_D=~INB_D;
  75:../src/rx210.c **** 		}
  76:../src/rx210.c **** 		if (flag_under_MTU2==1){
  77:../src/rx210.c **** 			flag_under_MTU2=0;
  78:../src/rx210.c **** 			INA_D=~INA_D;
  79:../src/rx210.c **** 			INB_D=~INB_D;
  80:../src/rx210.c **** 		}
  81:../src/rx210.c **** 		if (flag_over_MTU1==1){
  82:../src/rx210.c **** 			flag_over_MTU1=0;
  83:../src/rx210.c **** 			INA_G=~INA_G;
  84:../src/rx210.c **** 			INB_G=~INB_G;
  85:../src/rx210.c **** 		}
  86:../src/rx210.c **** 		if (flag_under_MTU1==1){
  87:../src/rx210.c **** 			flag_under_MTU1=0;
  88:../src/rx210.c **** 			INA_G=~INA_G;
  89:../src/rx210.c **** 			INB_G=~INB_G;
  90:../src/rx210.c **** 		}
  91:../src/rx210.c **** 
  92:../src/rx210.c **** */
  93:../src/rx210.c **** }
  87                             		.loc 1 93 0 discriminator 1
  88 00ae 2E 00                   		bra	.L2
  89                             	.LFE0:
 139                             	.Letext0:
 140                             		.file 2 "../src/iodefine.h"

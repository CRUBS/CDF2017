   1                             		.file	"rx210.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.global	_compteur
   5                             		.section B,"w",@nobits
   6                             		.p2align 2
   7                             		.balign 4
  10                             	_compteur:
  11 0000 00 00 00 00             		.zero	4
  12                             		.section P,"ax"
  13                             		.global	_main
  15                             	_main:
  16                             	.LFB0:
  17                             		.file 1 "../src/rx210.c"
   1:../src/rx210.c **** /***************************************************************/
   2:../src/rx210.c **** /*                                                             */
   3:../src/rx210.c **** /*      PROJECT NAME :  rx210                                  */
   4:../src/rx210.c **** /*      FILE         :  rx210.c                                */
   5:../src/rx210.c **** /*      DESCRIPTION  :  Main Program                           */
   6:../src/rx210.c **** /*      CPU SERIES   :  RX200                                  */
   7:../src/rx210.c **** /*      CPU TYPE     :  RX210                                  */
   8:../src/rx210.c **** /*                                                             */
   9:../src/rx210.c **** /*      This file is generated by e2 studio.                   */
  10:../src/rx210.c **** /*                                                             */
  11:../src/rx210.c **** /***************************************************************/                                
  12:../src/rx210.c ****                                                                            
  13:../src/rx210.c ****                                                                            
  14:../src/rx210.c **** /************************************************************************/
  15:../src/rx210.c **** /*    File Version: V1.00                                               */
  16:../src/rx210.c **** /*    Date Generated: 08/07/2013                                        */
  17:../src/rx210.c **** /************************************************************************/
  18:../src/rx210.c **** 
  19:../src/rx210.c **** #include "iodefine.h"
  20:../src/rx210.c **** #include "RPBRX210.h"
  21:../src/rx210.c **** #include "decoder_quadra.h"
  22:../src/rx210.c **** #include "pwm_asser_RX210.h"
  23:../src/rx210.c **** 
  24:../src/rx210.c **** 
  25:../src/rx210.c **** #ifdef CPPAPP
  26:../src/rx210.c **** //Initialize global constructors
  27:../src/rx210.c **** extern "C" void __main()
  28:../src/rx210.c **** {
  29:../src/rx210.c ****   static int initialized;
  30:../src/rx210.c ****   if (! initialized)
  31:../src/rx210.c ****     {
  32:../src/rx210.c ****       typedef void (*pfunc) ();
  33:../src/rx210.c ****       extern pfunc __ctors[];
  34:../src/rx210.c ****       extern pfunc __ctors_end[];
  35:../src/rx210.c ****       pfunc *p;
  36:../src/rx210.c **** 
  37:../src/rx210.c ****       initialized = 1;
  38:../src/rx210.c ****       for (p = __ctors_end; p > __ctors; )
  39:../src/rx210.c ****     (*--p) ();
  40:../src/rx210.c **** 
  41:../src/rx210.c ****     }
  42:../src/rx210.c **** }
  43:../src/rx210.c **** #endif 
  44:../src/rx210.c **** int compteur=0;
  45:../src/rx210.c **** 
  46:../src/rx210.c **** int main(void)
  47:../src/rx210.c **** {
  18                             		.loc 1 47 0
  19 0000 6E 6C                   		pushm	r6-r12
  20                             	.LCFI0:
  21 0002 EF 06                   		mov.L	r0, r6
  22                             	.LCFI1:
  48:../src/rx210.c **** 	LED1_OFF;
  23                             		.loc 1 48 0
  24 0004 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  25 0009 CD AB 20                		mov.B	32[r10], r11
  26 000c 75 3B 40                		or	#64, r11
  27 000f C7 AB 20                		mov.B	r11, 32[r10]
  49:../src/rx210.c **** 	LED0_OFF;
  28                             		.loc 1 49 0
  29 0012 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  30 0017 CD AB 20                		mov.B	32[r10], r11
  31 001a 75 3B 80                		or	#0xffffff80, r11
  32 001d C7 AB 20                		mov.B	r11, 32[r10]
  50:../src/rx210.c **** 	LED2_OFF;
  33                             		.loc 1 50 0
  34 0020 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  35 0025 CD AB 20                		mov.B	32[r10], r11
  36 0028 75 3B 20                		or	#32, r11
  37 002b C7 AB 20                		mov.B	r11, 32[r10]
  51:../src/rx210.c **** 	mtclk_init();		// fonction d'initialisation du module de comptage
  38                             		.loc 1 51 0
  39 002e 05 00 00 00             		bsr	_mtclk_init
  52:../src/rx210.c **** 	mtclk_start();		// démarre le décodage en quadrature
  40                             		.loc 1 52 0
  41 0032 05 00 00 00             		bsr	_mtclk_start
  53:../src/rx210.c **** 	PWM_asser_init(0x03E8);
  42                             		.loc 1 53 0
  43 0036 FB 1A E8 03             		mov.L	#0x3e8, r1
  44 003a 05 00 00 00             		bsr	_PWM_asser_init
  45                             	.L5:
  54:../src/rx210.c **** 	while(1){
  55:../src/rx210.c **** 		if(compteur_g>compteur+4096||compteur_g<compteur-4096)
  46                             		.loc 1 55 0
  47 003e FB AE 90 86 08          		mov.L	#0x88690, r10
  48 0043 DD AA 7B                		mov.W	246[r10], r10
  49 0046 5F AB                   		movu.W	r10, r11
  50 0048 FB A2 00 00 00 00       		mov.L	#_compteur, r10
  51 004e EC AA                   		mov.L	[r10], r10
  52 0050 72 AA 00 10             		add	#0x1000, r10
  53 0054 47 AB                   		cmp	r10, r11
  54 0056 2A 1C                   		bgt	.L2
  55                             		.loc 1 55 0 is_stmt 0 discriminator 1
  56 0058 FB AE 90 86 08          		mov.L	#0x88690, r10
  57 005d DD AA 7B                		mov.W	246[r10], r10
  58 0060 5F AB                   		movu.W	r10, r11
  59 0062 FB A2 00 00 00 00       		mov.L	#_compteur, r10
  60 0068 EC AA                   		mov.L	[r10], r10
  61 006a 72 AA 00 F0             		add	#0xfffff000, r10
  62 006e 47 AB                   		cmp	r10, r11
  63 0070 28 7F                   		bge	.L3
  64                             	.L2:
  56:../src/rx210.c **** 		{
  57:../src/rx210.c **** 			LED1=~LED1;
  65                             		.loc 1 57 0 is_stmt 1
  66 0072 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  67 0077 FB BE 01 C0 08          		mov.L	#0x8c001, r11
  68 007c CD BB 20                		mov.B	32[r11], r11
  69 007f 5B BB                   		movu.B	r11, r11
  70 0081 68 6B                   		shlr	#6, r11
  71 0083 64 1B                   		and	#1, r11
  72 0085 7E 0B                   		not	r11
  73 0087 64 1B                   		and	#1, r11
  74 0089 64 1B                   		and	#1, r11
  75 008b 6C 6B                   		shll	#6, r11
  76 008d CD AC 20                		mov.B	32[r10], r12
  77 0090 75 2C BF                		and	#0xffffffbf, r12
  78 0093 57 CB                   		or	r12, r11
  79 0095 C7 AB 20                		mov.B	r11, 32[r10]
  58:../src/rx210.c **** 			compteur = compteur_g;
  80                             		.loc 1 58 0
  81 0098 FB AE 90 86 08          		mov.L	#0x88690, r10
  82 009d DD AA 7B                		mov.W	246[r10], r10
  83 00a0 5F AB                   		movu.W	r10, r11
  84 00a2 FB A2 00 00 00 00       		mov.L	#_compteur, r10
  85 00a8 E3 AB                   		mov.L	r11, [r10]
  59:../src/rx210.c **** 			if(sens_rot_g==1){LED0_ON;}
  86                             		.loc 1 59 0
  87 00aa FB AE 90 86 08          		mov.L	#0x88690, r10
  88 00af CD AA F5                		mov.B	245[r10], r10
  89 00b2 5B AA                   		movu.B	r10, r10
  90 00b4 68 7A                   		shlr	#7, r10
  91 00b6 5B AA                   		movu.B	r10, r10
  92 00b8 61 1A                   		cmp	#1, r10
  93 00ba 21 12                   		bne	.L4
  94                             		.loc 1 59 0 is_stmt 0 discriminator 1
  95 00bc FB AE 01 C0 08          		mov.L	#0x8c001, r10
  96 00c1 CD AB 20                		mov.B	32[r10], r11
  97 00c4 75 2B 7F                		and	#0x7f, r11
  98 00c7 C7 AB 20                		mov.B	r11, 32[r10]
  99 00ca 2E 25                   		bra	.L3
 100                             	.L4:
  60:../src/rx210.c **** 			else if (sens_rot_g==0){LED0_OFF;}
 101                             		.loc 1 60 0 is_stmt 1
 102 00cc FB AE 90 86 08          		mov.L	#0x88690, r10
 103 00d1 CD AA F5                		mov.B	245[r10], r10
 104 00d4 5B AA                   		movu.B	r10, r10
 105 00d6 68 7A                   		shlr	#7, r10
 106 00d8 5B AA                   		movu.B	r10, r10
 107 00da 61 0A                   		cmp	#0, r10
 108 00dc 21 13                   		bne	.L3
 109                             		.loc 1 60 0 is_stmt 0 discriminator 1
 110 00de FB AE 01 C0 08          		mov.L	#0x8c001, r10
 111 00e3 CD AB 20                		mov.B	32[r10], r11
 112 00e6 75 3B 80                		or	#0xffffff80, r11
 113 00e9 C7 AB 20                		mov.B	r11, 32[r10]
  61:../src/rx210.c **** 	}}
 114                             		.loc 1 61 0 is_stmt 1 discriminator 1
 115 00ec 38 52 FF                		bra	.L5
 116                             	.L3:
 117                             		.loc 1 61 0 is_stmt 0
 118 00ef 38 4F FF                		bra	.L5
 119                             	.LFE0:
 169                             	.Letext0:
 170                             		.file 2 "../src/iodefine.h"

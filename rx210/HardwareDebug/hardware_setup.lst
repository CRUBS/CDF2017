   1                             		.file	"hardware_setup.c"
   2                             		.section P,"ax"
   3                             	.Ltext0:
   4                             		.global	_HardwareSetup
   6                             	_HardwareSetup:
   7                             	.LFB0:
   8                             		.file 1 "../src/hardware_setup.c"
   1:../src/hardware_setup.c **** /***************************************************************/
   2:../src/hardware_setup.c **** /*                                                             */
   3:../src/hardware_setup.c **** /*      PROJECT NAME :  rx210                                  */
   4:../src/hardware_setup.c **** /*      FILE         :  hardware_setup.c                       */
   5:../src/hardware_setup.c **** /*      DESCRIPTION  :  Hardware Initialization                */
   6:../src/hardware_setup.c **** /*      CPU SERIES   :  RX200                                  */
   7:../src/hardware_setup.c **** /*      CPU TYPE     :  RX210                                  */
   8:../src/hardware_setup.c **** /*                                                             */
   9:../src/hardware_setup.c **** /*      This file is generated by e2 studio.                   */
  10:../src/hardware_setup.c **** /*                                                             */
  11:../src/hardware_setup.c **** /***************************************************************/                                
  12:../src/hardware_setup.c ****                                                                            
  13:../src/hardware_setup.c ****                                                                            
  14:../src/hardware_setup.c **** /************************************************************************/
  15:../src/hardware_setup.c **** /*    File Version: V1.00                                               */
  16:../src/hardware_setup.c **** /*    Date Generated: 08/07/2013                                        */
  17:../src/hardware_setup.c **** /************************************************************************/
  18:../src/hardware_setup.c **** 
  19:../src/hardware_setup.c **** #include "iodefine.h"
  20:../src/hardware_setup.c **** #ifdef __cplusplus
  21:../src/hardware_setup.c **** extern "C"
  22:../src/hardware_setup.c **** {
  23:../src/hardware_setup.c **** #endif
  24:../src/hardware_setup.c ****   extern void HardwareSetup (void);
  25:../src/hardware_setup.c **** #ifdef __cplusplus
  26:../src/hardware_setup.c **** }
  27:../src/hardware_setup.c **** #endif
  28:../src/hardware_setup.c **** 
  29:../src/hardware_setup.c **** void
  30:../src/hardware_setup.c **** HardwareSetup (void)
  31:../src/hardware_setup.c **** {
   9                             		.loc 1 31 0
  10 0000 6E 6B                   		pushm	r6-r11
  11                             	.LCFI0:
  12 0002 EF 06                   		mov.L	r0, r6
  13                             	.LCFI1:
  32:../src/hardware_setup.c **** //Modification de l'horloge
  33:../src/hardware_setup.c **** SYSTEM.PRCR.WORD=0xA501; //write enable for clock register
  14                             		.loc 1 33 0
  15 0004 FB AE 00 00 08          		mov.L	#0x80000, r10
  16 0009 FA A9 FF 01 01 A5       		mov.W	#0xffffa501, 1022[r10]
  34:../src/hardware_setup.c **** SYSTEM.SCKCR3.BIT.CKSEL=1; //modification de la main clock ( 001 -> HOCO -> 32MHz)
  17                             		.loc 1 34 0
  18 000f FB AE 00 00 08          		mov.L	#0x80000, r10
  19 0014 DD AB 13                		mov.W	38[r10], r11
  20 0017 76 2B FF F8             		and	#0xfffff8ff, r11
  21 001b 76 3B 00 01             		or	#0x100, r11
  22 001f D7 AB 13                		mov.W	r11, 38[r10]
  35:../src/hardware_setup.c **** SYSTEM.SCKCR.LONG=0x00000000;
  23                             		.loc 1 35 0
  24 0022 FB AE 00 00 08          		mov.L	#0x80000, r10
  25 0027 F9 A6 08 00             		mov.L	#0, 32[r10]
  36:../src/hardware_setup.c **** SYSTEM.PRCR.WORD=0xA500; //write disable for all register
  26                             		.loc 1 36 0
  27 002b FB AE 00 00 08          		mov.L	#0x80000, r10
  28 0030 FA A9 FF 01 00 A5       		mov.W	#0xffffa500, 1022[r10]
  37:../src/hardware_setup.c **** 
  38:../src/hardware_setup.c **** 
  39:../src/hardware_setup.c **** //Autoriser l'écriture des registres PFS
  40:../src/hardware_setup.c **** MPC.PWPR.BIT.B0WI=0;
  29                             		.loc 1 40 0
  30 0036 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  31 003b CD AB 1F                		mov.B	31[r10], r11
  32 003e 75 2B 7F                		and	#0x7f, r11
  33 0041 C7 AB 1F                		mov.B	r11, 31[r10]
  41:../src/hardware_setup.c **** MPC.PWPR.BIT.PFSWE=1;
  34                             		.loc 1 41 0
  35 0044 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  36 0049 CD AB 1F                		mov.B	31[r10], r11
  37 004c 75 3B 40                		or	#64, r11
  38 004f C7 AB 1F                		mov.B	r11, 31[r10]
  42:../src/hardware_setup.c **** 
  43:../src/hardware_setup.c **** /* Port 1 - LED1 */
  44:../src/hardware_setup.c **** PORT1.PODR.BYTE = 0x00 ;    /* */
  39                             		.loc 1 44 0
  40 0052 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  41 0057 F9 A4 20 00             		mov.B	#0, 32[r10]
  45:../src/hardware_setup.c **** PORT1.PMR.BYTE  = 0x00 ;    /* All GPIO for now */
  42                             		.loc 1 45 0
  43 005b FB AE 01 C0 08          		mov.L	#0x8c001, r10
  44 0060 F9 A4 60 00             		mov.B	#0, 96[r10]
  46:../src/hardware_setup.c **** MPC.P16PFS.BYTE = 0x00 ;    //
  45                             		.loc 1 46 0
  46 0064 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  47 0069 F9 A4 4E 00             		mov.B	#0, 78[r10]
  47:../src/hardware_setup.c **** PORT1.PMR.BYTE  = 0x00 ;    // all port use in I/O
  48                             		.loc 1 47 0
  49 006d FB AE 01 C0 08          		mov.L	#0x8c001, r10
  50 0072 F9 A4 60 00             		mov.B	#0, 96[r10]
  48:../src/hardware_setup.c **** PORT1.PODR.BYTE = 0x00 ; 	// all output are low
  51                             		.loc 1 48 0
  52 0076 FB AE 01 C0 08          		mov.L	#0x8c001, r10
  53 007b F9 A4 20 00             		mov.B	#0, 32[r10]
  49:../src/hardware_setup.c **** PORT1.PDR.BYTE = 0xFF ;		// all are output
  54                             		.loc 1 49 0
  55 007f FB AE 01 C0 08          		mov.L	#0x8c001, r10
  56 0084 F8 A4 FF                		mov.B	#-1, [r10]
  50:../src/hardware_setup.c **** 
  51:../src/hardware_setup.c **** /* Port 3 - SW1 */
  52:../src/hardware_setup.c **** PORT3.PODR.BYTE = 0x00 ;    /* */
  57                             		.loc 1 52 0
  58 0087 FB AE 03 C0 08          		mov.L	#0x8c003, r10
  59 008c F9 A4 20 00             		mov.B	#0, 32[r10]
  53:../src/hardware_setup.c **** PORT3.PMR.BYTE  = 0x00 ;    /* All GPIO for now */
  60                             		.loc 1 53 0
  61 0090 FB AE 03 C0 08          		mov.L	#0x8c003, r10
  62 0095 F9 A4 60 00             		mov.B	#0, 96[r10]
  54:../src/hardware_setup.c **** MPC.P31PFS.BYTE = 0x00 ;    //
  63                             		.loc 1 54 0
  64 0099 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  65 009e F9 A4 59 00             		mov.B	#0, 89[r10]
  55:../src/hardware_setup.c **** PORT3.PMR.BYTE  = 0x00 ;    // all port use in I/O
  66                             		.loc 1 55 0
  67 00a2 FB AE 03 C0 08          		mov.L	#0x8c003, r10
  68 00a7 F9 A4 60 00             		mov.B	#0, 96[r10]
  56:../src/hardware_setup.c **** PORT3.PODR.BYTE = 0x00 ; 	// all output are low
  69                             		.loc 1 56 0
  70 00ab FB AE 03 C0 08          		mov.L	#0x8c003, r10
  71 00b0 F9 A4 20 00             		mov.B	#0, 32[r10]
  57:../src/hardware_setup.c **** PORT3.PDR.BYTE = 0x00 ;		// all are output
  72                             		.loc 1 57 0
  73 00b4 FB AE 03 C0 08          		mov.L	#0x8c003, r10
  74 00b9 F8 A4 00                		mov.B	#0, [r10]
  58:../src/hardware_setup.c **** 
  59:../src/hardware_setup.c **** /* Port A - MTCLKA & MTCLKB & MTCLKC & MTCLKD */
  60:../src/hardware_setup.c **** PORTA.PODR.BYTE = 0x00 ;    /* */
  75                             		.loc 1 60 0
  76 00bc FB AE 0A C0 08          		mov.L	#0x8c00a, r10
  77 00c1 F9 A4 20 00             		mov.B	#0, 32[r10]
  61:../src/hardware_setup.c **** PORTA.PMR.BYTE  = 0x00 ;    /* All GPIO for now */
  78                             		.loc 1 61 0
  79 00c5 FB AE 0A C0 08          		mov.L	#0x8c00a, r10
  80 00ca F9 A4 60 00             		mov.B	#0, 96[r10]
  62:../src/hardware_setup.c **** MPC.PA4PFS.BYTE = 0x02 ;    // port = MTCLKA (input)
  81                             		.loc 1 62 0
  82 00ce FB AE 00 C1 08          		mov.L	#0x8c100, r10
  83 00d3 F9 A4 94 02             		mov.B	#2, 148[r10]
  63:../src/hardware_setup.c **** MPC.PA6PFS.BYTE = 0x02 ;	// port = MTCLKB (input)
  84                             		.loc 1 63 0
  85 00d7 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  86 00dc F9 A4 96 02             		mov.B	#2, 150[r10]
  64:../src/hardware_setup.c **** MPC.PA1PFS.BYTE = 0x02 ;	// port = MTCLKC (input)
  87                             		.loc 1 64 0
  88 00e0 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  89 00e5 F9 A4 91 02             		mov.B	#2, 145[r10]
  65:../src/hardware_setup.c **** MPC.PA3PFS.BYTE = 0x02 ;	// port = MTCLKD (input)
  90                             		.loc 1 65 0
  91 00e9 FB AE 00 C1 08          		mov.L	#0x8c100, r10
  92 00ee F9 A4 93 02             		mov.B	#2, 147[r10]
  66:../src/hardware_setup.c **** PORTA.PMR.BYTE  = 0b01011010 ;    // port 6 & 4 & 3 & 1 use as function
  93                             		.loc 1 66 0
  94 00f2 FB AE 0A C0 08          		mov.L	#0x8c00a, r10
  95 00f7 F9 A4 60 5A             		mov.B	#0x5a, 96[r10]
  67:../src/hardware_setup.c **** PORTA.PODR.BYTE = 0x00 ; 	// all output are low
  96                             		.loc 1 67 0
  97 00fb FB AE 0A C0 08          		mov.L	#0x8c00a, r10
  98 0100 F9 A4 20 00             		mov.B	#0, 32[r10]
  68:../src/hardware_setup.c **** PORTA.PDR.BYTE = 0x00 ;	// all are input
  99                             		.loc 1 68 0
 100 0104 FB AE 0A C0 08          		mov.L	#0x8c00a, r10
 101 0109 F8 A4 00                		mov.B	#0, [r10]
  69:../src/hardware_setup.c **** 
  70:../src/hardware_setup.c **** /* Port B - H driver left and right & RX/TX*/
  71:../src/hardware_setup.c **** PORTB.PODR.BYTE = 0x00 ;    /* */
 102                             		.loc 1 71 0
 103 010c FB AE 0B C0 08          		mov.L	#0x8c00b, r10
 104 0111 F9 A4 20 00             		mov.B	#0, 32[r10]
  72:../src/hardware_setup.c **** PORTB.PMR.BYTE  = 0x00 ;    /* All GPIO for now */
 105                             		.loc 1 72 0
 106 0115 FB AE 0B C0 08          		mov.L	#0x8c00b, r10
 107 011a F9 A4 60 00             		mov.B	#0, 96[r10]
  73:../src/hardware_setup.c **** MPC.PB0PFS.BYTE = 0x00 ;    // port = 0/1 (output)
 108                             		.loc 1 73 0
 109 011e FB AE 00 C1 08          		mov.L	#0x8c100, r10
 110 0123 F9 A4 98 00             		mov.B	#0, 152[r10]
  74:../src/hardware_setup.c **** MPC.PB1PFS.BYTE = 0x00 ;	// port = 0/1 (output)
 111                             		.loc 1 74 0
 112 0127 FB AE 00 C1 08          		mov.L	#0x8c100, r10
 113 012c F9 A4 99 00             		mov.B	#0, 153[r10]
  75:../src/hardware_setup.c **** MPC.PB2PFS.BYTE = 0x00 ;	// port = 0/1 (output)
 114                             		.loc 1 75 0
 115 0130 FB AE 00 C1 08          		mov.L	#0x8c100, r10
 116 0135 F9 A4 9A 00             		mov.B	#0, 154[r10]
  76:../src/hardware_setup.c **** MPC.PB3PFS.BYTE = 0x00 ;	// port = 0/1 (output)
 117                             		.loc 1 76 0
 118 0139 FB AE 00 C1 08          		mov.L	#0x8c100, r10
 119 013e F9 A4 9B 00             		mov.B	#0, 155[r10]
  77:../src/hardware_setup.c **** MPC.PB6PFS.BYTE = 0x10 ;	// port = RXD9 (input)
 120                             		.loc 1 77 0
 121 0142 FB AE 00 C1 08          		mov.L	#0x8c100, r10
 122 0147 F9 A4 9E 10             		mov.B	#16, 158[r10]
  78:../src/hardware_setup.c **** MPC.PB7PFS.BYTE = 0x10 ;	// port = TXD9 (output)
 123                             		.loc 1 78 0
 124 014b FB AE 00 C1 08          		mov.L	#0x8c100, r10
 125 0150 F9 A4 9F 10             		mov.B	#16, 159[r10]
  79:../src/hardware_setup.c **** PORTB.PMR.BYTE  = 0b011000000 ;    // port 6 & 7 use as function
 126                             		.loc 1 79 0
 127 0154 FB AE 0B C0 08          		mov.L	#0x8c00b, r10
 128 0159 F9 A4 60 C0             		mov.B	#-64, 96[r10]
  80:../src/hardware_setup.c **** PORTB.PODR.BYTE = 0x00 ; 	// all output are low
 129                             		.loc 1 80 0
 130 015d FB AE 0B C0 08          		mov.L	#0x8c00b, r10
 131 0162 F9 A4 20 00             		mov.B	#0, 32[r10]
  81:../src/hardware_setup.c **** PORTB.PDR.BYTE = 0b110111111 ;	// port 6 as input rest as output
 132                             		.loc 1 81 0
 133 0166 FB AE 0B C0 08          		mov.L	#0x8c00b, r10
 134 016b F8 A4 BF                		mov.B	#0xffffffbf, [r10]
  82:../src/hardware_setup.c **** 
  83:../src/hardware_setup.c **** /*Port C - MTIOC3A & MTIOC3C */
  84:../src/hardware_setup.c **** PORTC.PODR.BYTE = 0x00 ;    /* */
 135                             		.loc 1 84 0
 136 016e FB AE 0C C0 08          		mov.L	#0x8c00c, r10
 137 0173 F9 A4 20 00             		mov.B	#0, 32[r10]
  85:../src/hardware_setup.c **** PORTC.PMR.BYTE  = 0x00 ;    /* All GPIO for now */
 138                             		.loc 1 85 0
 139 0177 FB AE 0C C0 08          		mov.L	#0x8c00c, r10
 140 017c F9 A4 60 00             		mov.B	#0, 96[r10]
  86:../src/hardware_setup.c **** MPC.PC0PFS.BYTE = 0x01 ;    // port = MTIOC3C (output)
 141                             		.loc 1 86 0
 142 0180 FB AE 00 C1 08          		mov.L	#0x8c100, r10
 143 0185 F9 A4 A0 01             		mov.B	#1, 160[r10]
  87:../src/hardware_setup.c **** MPC.PC1PFS.BYTE = 0x01 ;	// port = MTIOC3A (output)
 144                             		.loc 1 87 0
 145 0189 FB AE 00 C1 08          		mov.L	#0x8c100, r10
 146 018e F9 A4 A1 01             		mov.B	#1, 161[r10]
  88:../src/hardware_setup.c **** PORTC.PMR.BYTE  = 0b00000011 ;    // port 0 & 1 use as function
 147                             		.loc 1 88 0
 148 0192 FB AE 0C C0 08          		mov.L	#0x8c00c, r10
 149 0197 F9 A4 60 03             		mov.B	#3, 96[r10]
  89:../src/hardware_setup.c **** PORTC.PODR.BYTE = 0x00 ; 	// all output are low
 150                             		.loc 1 89 0
 151 019b FB AE 0C C0 08          		mov.L	#0x8c00c, r10
 152 01a0 F9 A4 20 00             		mov.B	#0, 32[r10]
  90:../src/hardware_setup.c **** PORTC.PDR.BYTE = 0xFF ;	// all are output
 153                             		.loc 1 90 0
 154 01a4 FB AE 0C C0 08          		mov.L	#0x8c00c, r10
 155 01a9 F8 A4 FF                		mov.B	#-1, [r10]
  91:../src/hardware_setup.c **** 
  92:../src/hardware_setup.c **** //Fin des droits d'écriture des registres PFS
  93:../src/hardware_setup.c **** MPC.PWPR.BIT.B0WI=1;
 156                             		.loc 1 93 0
 157 01ac FB AE 00 C1 08          		mov.L	#0x8c100, r10
 158 01b1 CD AB 1F                		mov.B	31[r10], r11
 159 01b4 75 3B 80                		or	#0xffffff80, r11
 160 01b7 C7 AB 1F                		mov.B	r11, 31[r10]
  94:../src/hardware_setup.c **** MPC.PWPR.BIT.PFSWE=0;
 161                             		.loc 1 94 0
 162 01ba FB AE 00 C1 08          		mov.L	#0x8c100, r10
 163 01bf CD AB 1F                		mov.B	31[r10], r11
 164 01c2 75 2B BF                		and	#0xffffffbf, r11
 165 01c5 C7 AB 1F                		mov.B	r11, 31[r10]
  95:../src/hardware_setup.c **** }
 166                             		.loc 1 95 0
 167 01c8 3F 6B 06                		rtsd	#24, r6-r11
 168                             	.LFE0:
 216                             	.Letext0:
 217                             		.file 2 "../src/iodefine.h"
